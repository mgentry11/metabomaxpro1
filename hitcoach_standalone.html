<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <meta name="application-name" content="HIT Coach Pro">
    <meta name="theme-color" content="#F5A623">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>HIT Coach Pro</title>
    <link rel="stylesheet" href="static/css/hitcoach_app.css?v=7">
</head>
<body class="app-body">
    <!-- Status Bar Spacer (for iPhone frame) -->
    <div class="status-bar-spacer"></div>

    <!-- App Header -->
    <header class="app-header">
        <div class="app-header-content">
            <div class="app-logo">
                <span class="app-title">HIT Coach Pro</span>
            </div>
            <div class="header-actions">
                <button class="settings-btn" onclick="navigateTo('settings')">‚öôÔ∏è</button>
                <button class="profile-btn" onclick="navigateTo('profile')">üë§</button>
            </div>
        </div>
    </header>

    <!-- Workout Tabs -->
    <div class="workout-tabs" id="workoutTabs">
        <button class="workout-tab active" id="tabA" onclick="switchWorkoutTab('A')">Workout A</button>
        <button class="workout-tab" id="tabB" onclick="switchWorkoutTab('B')">Workout B</button>
    </div>

    <!-- Main Container -->
    <div class="app-container">
        <!-- Home Screen (Exercise List) -->
        <div class="screen active" id="homeScreen">
            <div class="exercise-list" id="exerciseList">
                <!-- Exercise items populated by JavaScript -->
            </div>
        </div>

        <!-- Exercise Setup Screen -->
        <div class="screen" id="exerciseSetupScreen">
            <div class="workout-header">
                <button class="back-btn" onclick="navigateTo('workouts')">‚Üê Back</button>
                <h2 class="workout-title" id="setupTitle">Exercise Setup</h2>
                <span class="exercise-counter" id="setupCounter">1 / 8</span>
            </div>

            <div class="current-exercise">
                <h1 id="setupExerciseName">Leg Press</h1>
                <div class="exercise-icon-display" id="setupExerciseIcon">‚¨áÔ∏è</div>
                <p style="color: var(--text-gray); margin-top: 0.5rem;" id="setupMuscle">Legs</p>
            </div>

            <!-- Weight Setup -->
            <div class="settings-section">
                <h2 class="settings-section-title">SET YOUR WEIGHT</h2>
                <div class="weight-input-section" style="margin-bottom: 0;">
                    <input type="number" id="setupWeightInput" placeholder="Enter weight (lbs)" min="0" step="5">
                    <p class="last-weight" id="setupLastWeight">Last time: -- lbs</p>
                </div>
            </div>

            <!-- Siri Shortcuts Section -->
            <div class="settings-section">
                <h2 class="settings-section-title">Siri Shortcuts</h2>
                <div class="siri-shortcuts-list">
                    <div class="siri-shortcut-item" onclick="addSiriShortcut('start-exercise')">
                        <div class="siri-icon">üéôÔ∏è</div>
                        <div class="siri-info">
                            <div class="siri-title">Start This Exercise</div>
                            <div class="siri-phrase">"Hey Siri, start <span id="siriExerciseName">Leg Press</span>"</div>
                        </div>
                        <div class="siri-add">+</div>
                    </div>
                    <div class="siri-shortcut-item" onclick="addSiriShortcut('start-workout')">
                        <div class="siri-icon">üèãÔ∏è</div>
                        <div class="siri-info">
                            <div class="siri-title">Start Full Workout</div>
                            <div class="siri-phrase">"Hey Siri, start my <span id="siriWorkoutName">push</span> workout"</div>
                        </div>
                        <div class="siri-add">+</div>
                    </div>
                    <div class="siri-shortcut-item" onclick="addSiriShortcut('view-stats')">
                        <div class="siri-icon">üìä</div>
                        <div class="siri-info">
                            <div class="siri-title">View My Stats</div>
                            <div class="siri-phrase">"Hey Siri, show my workout stats"</div>
                        </div>
                        <div class="siri-add">+</div>
                    </div>
                </div>
            </div>

            <!-- Start Button -->
            <div class="control-buttons" style="margin-top: 1.5rem;">
                <button class="btn btn-primary btn-large" onclick="startExerciseFromSetup()">
                    START EXERCISE
                </button>
                <button class="btn btn-secondary btn-large" onclick="skipToNextExercise()">
                    SKIP TO NEXT
                </button>
            </div>
        </div>

        <!-- Active Workout Screen -->
        <div class="screen" id="workoutScreen">
            <div class="workout-header">
                <button class="back-btn" onclick="exitWorkout()">‚Üê Back</button>
                <h2 class="workout-title" id="workoutTitle">Workout A</h2>
                <span class="exercise-counter" id="exerciseCounter">1 / 8</span>
            </div>

            <div class="current-exercise">
                <h1 id="exerciseName">Leg Press</h1>
                <div class="exercise-icon-display" id="exerciseIconDisplay"></div>
            </div>

            <!-- Timer Display -->
            <div class="timer-section" id="timerSection">
                <div class="phase-indicator" id="phaseIndicator">PREP</div>
                <div class="timer-display" id="timerDisplay">10</div>
                <div class="phase-progress">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <p class="phase-description" id="phaseDescription">Get your weight ready</p>
            </div>

            <!-- Weight Input -->
            <div class="weight-input-section">
                <label for="weightInput">Weight (lbs)</label>
                <input type="number" id="weightInput" placeholder="Enter weight" min="0" step="5">
                <p class="last-weight" id="lastWeight"></p>
            </div>

            <!-- Control Buttons -->
            <div class="control-buttons">
                <button class="btn btn-primary btn-large" id="startBtn" onclick="startExercise()">
                    START EXERCISE
                </button>
                <button class="btn btn-secondary btn-large" id="pauseBtn" onclick="pauseExercise()" style="display: none;">
                    PAUSE
                </button>
                <button class="btn btn-primary btn-large" id="resumeBtn" onclick="resumeExercise()" style="display: none;">
                    RESUME
                </button>
            </div>

            <!-- Complete Section -->
            <div class="complete-section" id="completeSection" style="display: none;">
                <h3>Exercise Complete!</h3>
                <div class="failure-check">
                    <label>
                        <input type="checkbox" id="failureCheck">
                        Reached muscle failure
                    </label>
                </div>
                <div class="complete-buttons">
                    <button class="btn btn-primary" onclick="completeExercise()">
                        NEXT ‚Üí
                    </button>
                    <button class="btn btn-secondary" onclick="redoExercise()">
                        REDO
                    </button>
                </div>
            </div>

            <!-- Rest Screen -->
            <div class="rest-screen" id="restScreen" style="display: none;">
                <h2>Rest Period</h2>
                <div class="rest-timer" id="restTimer">60</div>
                <p>Next: <span id="nextExercise"></span></p>
                <button class="btn btn-secondary btn-large" onclick="skipRest()">SKIP REST</button>
            </div>
        </div>

        <!-- Stats Screen -->
        <div class="screen" id="statsScreen">
            <div class="stats-header">
                <h1 class="stats-title">Stats</h1>
            </div>
            <div id="statsContent">
                <!-- Stats populated by JavaScript -->
            </div>
        </div>

        <!-- Log Screen -->
        <div class="screen" id="logScreen">
            <div class="log-header">
                <h1 class="log-title">Log</h1>
                <button class="clear-btn" onclick="clearProgress()">Clear All</button>
            </div>
            <div class="log-filters">
                <button class="filter-btn active" onclick="filterLog('all')">All</button>
                <button class="filter-btn" onclick="filterLog('A')">Workout A</button>
                <button class="filter-btn" onclick="filterLog('B')">Workout B</button>
            </div>
            <div id="logList" class="log-list">
                <!-- Log entries populated by JavaScript -->
            </div>
        </div>

        <!-- Settings Screen -->
        <div class="screen" id="settingsScreen">
            <div class="screen-card">
                <h1 class="screen-title">Settings</h1>

                <!-- Voice Style Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">TRAINING STYLE</h2>
                    <p class="section-subtitle">Choose your coaching personality</p>
                    <div class="voice-style-grid">
                        <button class="voice-style-card" data-style="commander" onclick="setVoiceStyle('commander')">
                            <span class="voice-style-icon">üéñÔ∏è</span>
                            <span class="voice-style-name">Commander</span>
                            <span class="pro-badge">PRO</span>
                        </button>
                        <button class="voice-style-card" data-style="zen" onclick="setVoiceStyle('zen')">
                            <span class="voice-style-icon">üßò</span>
                            <span class="voice-style-name">Zen</span>
                            <span class="pro-badge">PRO</span>
                        </button>
                        <button class="voice-style-card" data-style="hype" onclick="setVoiceStyle('hype')">
                            <span class="voice-style-icon">üî•</span>
                            <span class="voice-style-name">Hype</span>
                            <span class="pro-badge">PRO</span>
                        </button>
                        <button class="voice-style-card" data-style="technical" onclick="setVoiceStyle('technical')">
                            <span class="voice-style-icon">üìê</span>
                            <span class="voice-style-name">Technical</span>
                        </button>
                        <button class="voice-style-card" data-style="friendly" onclick="setVoiceStyle('friendly')">
                            <span class="voice-style-icon">üòä</span>
                            <span class="voice-style-name">Friendly</span>
                        </button>
                    </div>
                </div>

                <!-- Basic Voice Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">BASIC VOICE</h2>
                    <div class="voice-card-grid">
                        <button class="voice-card" id="voiceMaleCard" onclick="setVoice('male')">
                            <div class="voice-card-circle">M</div>
                            <span class="voice-card-label">Male</span>
                        </button>
                        <button class="voice-card" id="voiceFemaleCard" onclick="setVoice('female')">
                            <div class="voice-card-circle">F</div>
                            <span class="voice-card-label">Female</span>
                        </button>
                    </div>
                </div>

                <!-- Rest Duration Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">REST DURATION</h2>
                    <div class="toggle-group">
                        <button class="toggle-btn" id="rest60" onclick="setRestDuration(60)">60s</button>
                        <button class="toggle-btn active" id="rest90" onclick="setRestDuration(90)">90s</button>
                        <button class="toggle-btn" id="rest120" onclick="setRestDuration(120)">120s</button>
                    </div>
                </div>

                <!-- Phase Timing Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">PHASE TIMING</h2>
                    <div class="phase-row">
                        <span class="phase-label">Prep</span>
                        <div class="phase-controls">
                            <button class="phase-btn" onclick="adjustPhase('prep', -5)">-</button>
                            <span class="phase-value" id="prepValue">10s</span>
                            <button class="phase-btn" onclick="adjustPhase('prep', 5)">+</button>
                        </div>
                    </div>
                    <div class="phase-row">
                        <span class="phase-label">Eccentric</span>
                        <div class="phase-controls">
                            <button class="phase-btn" onclick="adjustPhase('eccentric', -5)">-</button>
                            <span class="phase-value" id="eccentricValue">30s</span>
                            <button class="phase-btn" onclick="adjustPhase('eccentric', 5)">+</button>
                        </div>
                    </div>
                    <div class="phase-row">
                        <span class="phase-label">Concentric</span>
                        <div class="phase-controls">
                            <button class="phase-btn" onclick="adjustPhase('concentric', -5)">-</button>
                            <span class="phase-value" id="concentricValue">20s</span>
                            <button class="phase-btn" onclick="adjustPhase('concentric', 5)">+</button>
                        </div>
                    </div>
                    <div class="phase-row">
                        <span class="phase-label">Final Eccentric</span>
                        <div class="phase-controls">
                            <button class="phase-btn" onclick="adjustPhase('finalEccentric', -5)">-</button>
                            <span class="phase-value" id="finalEccentricValue">40s</span>
                            <button class="phase-btn" onclick="adjustPhase('finalEccentric', 5)">+</button>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary btn-large" onclick="saveSettings(); navigateTo('workouts')">Done</button>
            </div>
        </div>

        <!-- Profile Screen -->
        <div class="screen" id="profileScreen">
            <div class="screen-card">
                <h1 class="screen-title">Profile</h1>

                <!-- Your Name Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">YOUR NAME</h2>
                    <input type="text" class="profile-name-input" id="profileName" placeholder="Enter your name">
                </div>

                <!-- Experience Level Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">EXPERIENCE LEVEL</h2>
                    <p class="section-subtitle">Helps recommend the right routine</p>
                    <div class="experience-options">
                        <button class="experience-card" id="expBeginner" onclick="setExperience('beginner')">
                            <span class="experience-icon">üå±</span>
                            <div class="experience-text">
                                <span class="experience-title">Beginner</span>
                                <span class="experience-desc">New to HIT training</span>
                            </div>
                        </button>
                        <button class="experience-card active" id="expIntermediate" onclick="setExperience('intermediate')">
                            <span class="experience-icon">üí™</span>
                            <div class="experience-text">
                                <span class="experience-title">Intermediate</span>
                                <span class="experience-desc">6+ months experience</span>
                            </div>
                        </button>
                        <button class="experience-card" id="expAdvanced" onclick="setExperience('advanced')">
                            <span class="experience-icon">üî•</span>
                            <div class="experience-text">
                                <span class="experience-title">Advanced</span>
                                <span class="experience-desc">2+ years experience</span>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Recommended Routine Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">RECOMMENDED ROUTINE</h2>
                    <div class="routine-card">
                        <span class="routine-title">Full Body A/B Split</span>
                        <span class="routine-desc">Alternate workouts, 2-3x per week</span>
                    </div>
                </div>

                <!-- Weight Units Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">WEIGHT UNITS</h2>
                    <div class="toggle-group">
                        <button class="toggle-btn active" id="unitLbs" onclick="setWeightUnit('lbs')">lbs</button>
                        <button class="toggle-btn" id="unitKg" onclick="setWeightUnit('kg')">kg</button>
                    </div>
                </div>

                <!-- Siri Voice Control Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">SIRI VOICE CONTROL</h2>
                    <p class="section-subtitle">Set up Siri shortcuts to start exercises by voice from anywhere!</p>
                    <button class="btn btn-primary btn-large" onclick="navigateTo('siri')">Set Up Siri Shortcuts</button>
                    <p class="siri-hint">Say "Hey Siri, HIT Leg Press A" to start any exercise</p>
                </div>

                <!-- Duo Mode Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">DUO MODE</h2>
                    <p class="section-subtitle">Workout with a friend - track weights for 2 lifters</p>
                    <div class="duo-mode-toggle">
                        <div class="profile-stat-row">
                            <label class="profile-stat-label">Enable Duo Mode</label>
                            <div class="toggle-switch" id="duoModeToggle" onclick="toggleDuoMode()">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                    </div>
                    <div class="duo-names" id="duoNamesSection" style="display: none;">
                        <input type="text" class="profile-name-input" id="lifter1Name" placeholder="Lifter 1 name" style="margin-bottom: 0.5rem;">
                        <input type="text" class="profile-name-input" id="lifter2Name" placeholder="Lifter 2 name">
                    </div>
                </div>

                <!-- Data Section -->
                <div class="settings-section">
                    <h2 class="settings-section-title">DATA</h2>
                    <button class="btn btn-danger btn-large" onclick="confirmResetData()">Reset All Data</button>
                </div>

                <button class="btn btn-primary btn-large" onclick="saveProfile(); navigateTo('workouts')">Done</button>
            </div>
        </div>

        <!-- Siri Voice Control Screen -->
        <div class="screen" id="siriScreen">
            <div class="screen-card">
                <h1 class="screen-title">Set Up Siri Voice Control</h1>

                <div class="siri-instructions">
                    <p class="siri-instructions-title">Tap "Add" for any exercise:</p>
                    <ol class="siri-steps">
                        <li>URL copies automatically</li>
                        <li>Shortcuts app opens</li>
                        <li>Tap + ‚Üí Add Action ‚Üí "Open URL"</li>
                        <li>Paste ‚Üí Name it ‚Üí Done</li>
                    </ol>
                </div>

                <div class="siri-shortcut-item" onclick="addSiriShortcut('open-app')">
                    <div class="siri-shortcut-info">
                        <span class="siri-shortcut-name">Open App</span>
                        <span class="siri-shortcut-phrase">Say: "HIT"</span>
                    </div>
                    <button class="btn btn-primary siri-add-btn">+ Add to Siri</button>
                </div>

                <h2 class="settings-section-title" style="margin-top: 1.5rem;">WORKOUT A</h2>
                <div id="siriWorkoutAList" class="siri-list">
                    <!-- Populated by JavaScript -->
                </div>

                <h2 class="settings-section-title" style="margin-top: 1.5rem;">WORKOUT B</h2>
                <div id="siriWorkoutBList" class="siri-list">
                    <!-- Populated by JavaScript -->
                </div>

                <button class="btn btn-primary btn-large" style="margin-top: 1.5rem;" onclick="navigateTo('profile')">Done</button>
            </div>
        </div>

        <!-- Workout Summary Screen -->
        <div class="screen" id="summaryScreen">
            <div class="summary-content">
                <div class="summary-icon">üèÜ</div>
                <h1>Workout Complete!</h1>
                <p class="summary-subtitle">Great job finishing your workout</p>
                <div class="summary-stats" id="summaryStats"></div>
                <div class="summary-exercises" id="summaryExercises"></div>
                <div class="summary-buttons">
                    <button class="btn btn-primary btn-large" onclick="finishAndGoHome()">FINISH</button>
                    <button class="btn btn-secondary btn-large" onclick="shareWorkout()">SHARE</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" id="bottomNav">
        <button class="nav-item active" id="navWorkouts" onclick="navigateTo('workouts')">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"/>
                </svg>
            </span>
            Workouts
        </button>
        <button class="nav-item" id="navStats" onclick="navigateTo('stats')">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"/>
                </svg>
            </span>
            Stats
        </button>
        <button class="nav-item" id="navLog" onclick="navigateTo('log')">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                </svg>
            </span>
            Log
        </button>
    </nav>

    <!-- Upgrade Modal -->
    <div class="upgrade-modal" id="upgradeModal">
        <div class="upgrade-modal-content">
            <button class="upgrade-modal-close" onclick="closeUpgradeModal()">&times;</button>
            <h2>Unlock Pro Features</h2>
            <p>Upgrade to <strong>Pro</strong> to access premium voices, advanced analytics, and more.</p>
            <ul class="upgrade-modal-benefits">
                <li><strong>Premium Voices</strong> - Professional voice coaching</li>
                <li><strong>Advanced Stats</strong> - Detailed progress analytics</li>
                <li><strong>Cloud Sync</strong> - Access data across devices</li>
                <li><strong>Custom Workouts</strong> - Build your own routines</li>
            </ul>
            <div class="upgrade-modal-buttons">
                <a href="#" class="btn btn-primary btn-large">Upgrade to Pro</a>
                <button class="btn btn-secondary btn-large" onclick="closeUpgradeModal()">Maybe Later</button>
            </div>
        </div>
    </div>

    <!-- Add Exercise Modal -->
    <div class="upgrade-modal" id="addExerciseModal">
        <div class="upgrade-modal-content">
            <button class="upgrade-modal-close" onclick="closeAddExerciseModal()">&times;</button>
            <h2>Add Exercise</h2>
            <p>Select an exercise to add to your workout</p>
            <div id="exerciseSelectorList" class="exercise-selector-list">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Profile Switcher (for 2-person workouts) -->
    <div class="profile-switcher" id="profileSwitcher">
        <button class="profile-tab active" id="profile1Tab" onclick="switchActiveProfile(1)">
            <span class="profile-avatar">1</span>
            <span class="profile-name" id="profile1Name">Lifter 1</span>
        </button>
        <button class="profile-tab" id="profile2Tab" onclick="switchActiveProfile(2)">
            <span class="profile-avatar">2</span>
            <span class="profile-name" id="profile2Name">Lifter 2</span>
        </button>
    </div>

    <script src="static/js/hitcoach_app.js?v=5"></script>
</body>
</html>
